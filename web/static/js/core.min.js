let cookbooksPattern=new RegExp("^/cookbooks/\\d+(/recipes/search.*)?$"),cookbooksSharePattern=new RegExp("^/c/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"),recipesPattern=new RegExp("^/recipes/\\d+(/edit)?$"),recipesSharePattern=new RegExp("^/r/[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$"),reportsPattern=new RegExp("^/reports(/\\d+)?$"),pathsShowRecipesSidebar=["/","/cookbooks","/recipes"],pathsHideAddRecipeButton=["/admin","/cookbooks","/recipes/add","/recipes/add/manual"];function showAll(){showAddRecipeButton(),showAddCookbookButton(),showCookbookTitle(),showRecipesSidebar()}function showAddRecipeButton(){var e=recipesPattern.test(location.pathname)||recipesSharePattern.test(location.pathname),t=document.querySelector("#add_recipe");e||pathsHideAddRecipeButton.some(e=>e===location.pathname)||cookbooksPattern.test(location.pathname)||cookbooksSharePattern.test(location.pathname)||reportsPattern.test(location.pathname)?t?.classList.add("hidden"):t?.classList.remove("hidden")}function showAddCookbookButton(){var e=document.querySelector("#add_cookbook");e&&(add_cookbook.setAttribute("hx-target","#content"),add_cookbook.setAttribute("hx-swap","innerHTML"),htmx.process(add_cookbook)),"/cookbooks"===location.pathname?e?.classList.remove("hidden"):e?.classList.add("hidden")}function showCookbookTitle(){var e=document.querySelector("#content-title");cookbooksPattern.test(location.pathname)||cookbooksSharePattern.test(location.pathname)?e?.classList.add("md:block"):e?.classList.remove("md:block")}function showRecipesSidebar(){var e=document.querySelector("#desktop_nav"),t=document.querySelector("#mobile_nav");pathsShowRecipesSidebar.includes(location.pathname)||cookbooksPattern.test(location.pathname)?(e?.firstElementChild.classList.remove("hidden"),t?.classList.remove("hidden")):(e?.firstElementChild.classList.add("hidden"),t?.classList.add("hidden")),recipesPattern.test(location.pathname)||recipesSharePattern.test(location.pathname)||"/admin"===location.pathname||reportsPattern.test(location.pathname)?(e?.firstElementChild.classList.add("hidden"),t?.classList.add("hidden")):(e?.firstElementChild.classList.remove("hidden"),t?.classList.remove("hidden"))}function loadSortableJS(){return loadScript("https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js")}function loadScript(e){let o=document.createElement("script");return o.src=e,document.body.appendChild(o),new Promise((e,t)=>{o.onload=()=>e(),o.onerror=()=>t()})}function downloadFile(e,t,o){let a=window.URL.createObjectURL(e);e=document.createElement("a");e.style.display="none",e.href=a,e.setAttribute("download",t),void 0===e.download&&e.setAttribute("target","_blank"),document.body.appendChild(e),e.click(),document.body.removeChild(e),setTimeout(()=>{window.URL.revokeObjectURL(a)},100)}window.addEventListener("DOMContentLoaded",()=>{showAll(),document.addEventListener("htmx:pushedIntoHistory",showAll)}),document.addEventListener("htmx:beforeProcessNode",()=>{var e;document.querySelector("#add_cookbook")&&(null===document.querySelector(".cookbooks-display")?(add_cookbook.setAttribute("hx-target","#content"),add_cookbook.setAttribute("hx-swap","innerHTML")):(add_cookbook.setAttribute("hx-target",".cookbooks-display"),add_cookbook.setAttribute("hx-swap","beforeend"),(e=document.querySelector("#pagination"))&&!e.querySelector("button:nth-last-child(2)").classList.contains("btn-active")&&add_cookbook.setAttribute("hx-swap","none")),htmx.process(add_cookbook))}),htmx.on("htmx:pushedIntoHistory",()=>{showAll(),document.addEventListener("htmx:pushedIntoHistory",showAll)}),document.addEventListener("htmx:wsBeforeMessage",e=>{try{var{type:t,data:o,fileName:a,toast:n}=JSON.parse(e.detail.message);switch(t){case"toast":var{title:s,message:d,background:i,action:r}=n;showToast(s,d,i,r);break;case"file":var c=atob(o),l=new Uint8Array(c.length);for(let e=0;e<c.length;e++)l[e]=c.charCodeAt(e);downloadFile(new Blob([l],{type:"application/zip"}),a,"application/zip"),e.preventDefault()}}catch(e){}});